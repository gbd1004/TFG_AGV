\capitulo{3}{Conceptos teóricos}

Como se ha mencionado en apartados anteriores, los datos recibidos por el AGV se agrupan en series temporales. Conviene por tanto explicar
que son las series temporales, así como los modelos que se utilizarán para intentar predecirlas.


\section{Series temporales}

Una serie temporal es una colección de observaciones obtenidas mediante mediciones repetidas a lo largo del tiempo \cite{influx:timeseries}.

Normalmente, las series temporales presentan patrones que pueden utilizarse para realizar predicciones. Estos patrones son:
\begin{itemize}
    \item \textbf{Tendencia}. La tendencia existe cuando hay un incremento o decremento del valor medido a largo plazo. Esta tendencia
        no tiene por qué ser lineal.
    \item \textbf{Estacionalidad}. El patrón de estacionalidad se presenta cuando una serie temporal se ve afectada por factores estacionales,
        como puede ser el día de la semana. Siempre tiene una frecuencia fija y conocida.
    \item \textbf{Ciclos}. Un ciclo ocurre cuando los datos muestran incrementos o decrementos a una frecuencia no fija.
\end{itemize}

\imagen{pltEncDerecho.pdf}{Ejemplo de serie temporal}{1}

Existen distintos tipos de clasificaciones para las series temporales, según varios puntos de vista \cite{kitagawa2010introduction}, de
las cuales destacan:
\begin{itemize}
    \item \textbf{Continuas o discretas}. Las series temporales continuas son aquellas en las que la información se obtiene, valga la redundancia,
        de forma continua, normalmente por un dispositivo analógico, como podría ser los datos recibidos de un sismógrafo. Por otro lado,
        las series temporales discretas son aquellas en las que la información se obtiene en intervalos de tiempo concretos. Estos intervalos 
        pueden ser equidistantes, o bien ser irregulares. Normalmente, las series temporales medidas por medios digitales son discretas.
        En nuestro caso, las series temporales enviadas por el AGV son discretas espaciadas en intervalos irregulares, pues el AGV manda dicha
        información cada varios milisegundos, de manera irregular.
    \item \textbf{Univariantes o multivariantes}. Aquellas series temporales que tengan solo una observación por cada momento del tiempo son series
        univariantes. Por contra, aquellas en las que se obtengan de manera simultánea mediciones de dos o más fenómenos son multivariantes.
        Esto será importante a la hora de escoger que modelo utilizar para realizar predicciones, pues hay modelos que solo soportan series
        temporales univariantes.
    \item \textbf{Estacionarias o no estacionarias}. Una serie estacionaria \cite{hyndman2018forecasting} es aquella en la que sus propiedades no dependen del momento
        en el que se observan. Por ello, aquellas que presenten tendencias o estacionalidad no son estacionarias. Por otra parte, una serie de 
        ruido blanco es estacionaria: no importa cuándo se observe, debería tener el mismo aspecto en cualquier momento. De manera general, las
        series estacionarias no tendrán patrones predecibles en el largo plazo, por lo que conviene convertir las series estacionarias en no
        estacionarias.
\end{itemize}

\section{Predicción de series temporales}

La predicción de series temporales es una actividad muy importante en muchos sectores: predicción 
de datos financieros, predicciones del clima, etc. Debido a esto, existe una gran cantidad de 
modelos para realizar dichas predicciones. Hay que tener en cuenta sin embargo que predecir 
datos futuros es una tarea especialmente complicada, y no siempre se obtiene una gran precisión.

Los siguientes modelos se tendrán en cuenta en este trabajo:
\begin{itemize}
    \item \textbf{ARIMA.} Este modelo (Autoregressive Integrated Average) \cite{hyndman2018forecasting} es un enfoque estadístico utilizado para 
        el análisis y pronostico de series temporales. Es una combinación de tres componentes principales:
        \begin{itemize}
            \item Componente autorregresivo (AR): este componente utiliza la información de valores pasados de la
                serie temporal. Se basa en la idea de que los valores pasados tienen influencia en el futuro. Este 
                modelo indica cuantos valores pasados se utilizan en la predicción.
            \item Componente de media móvil (MA): tiene en cuenta el error residual de las predicciones anteriores 
                para mejorar la precisión, haciendo una media de los errores pasados para predecir los futuros. 
                Indica cuantos errores pasados se tienen en cuenta.
            \item Componente de Integración (I): se refiere al proceso de diferenciación de la serie temporal para 
                hacerla estacionaria. El orden de Integración indica cuántas veces se diferencia la serie temporal.
        \end{itemize}
        La combinación de estos tres componentes forman el modelo ARIMA(p, d, q), donde ``p'' representa el orden 
        del componente autorregresivo, ``d'' es el orden del componente de integración y ``q'' es el orden del componente 
        de media móvil.
    \item \textbf{TCN.} Una Red neuronal Convolucional Temporal (Convolutional Temporal Network en inglés) \cite{DBLP:journals/corr/abs-1803-01271} es un tipo de 
        red neuronal utilizada para analizar series temporales. Las TCN tienen en cuenta la estructura temporal de los datos 
        y aplican operaciones convolucionales para capturar patrones. Una convolución \cite{matlab:convolucion} es un operador matemático que transforma 
        dos funciones en una nueva. Un ejemplo de convolución es la media móvil, o un filtro de aumento de nitidez para imágenes.

        TCN utiliza capas convolucionales de una dimensión para aprender características de la serie temporal. Estas 
        capas son aplicadas sobre ventanas deslizantes de la secuencia para extraer características en diferentes puntos 
        de tiempo.
    \item \textbf{N-HiTS.} Este modelo (Neural Hierarchical interpolation for Time Series) es una extensión del modelo 
        N-BEATS, mejorando su rendimiento y velocidad de entrenamiento \cite{DBLP:journals/corr/abs-2201-12886}. N-BEATS \cite{Oreshkin2020N-BEATS:}
        está formado por dos componentes: stack y bloque. Un bloque está formado por una red multicapa que predice 
        valores futuros y pasados. Estos bloques se organizan en pilas (stacks), que agregan las predicciones y errores 
        residuales. 
    \item \textbf{Transformer Model.} El Modelo Transformador \cite{DBLP:journals/corr/VaswaniSPUJGKP17} es una red 
        neuronal que aprende el contexto de la información. Este modelo usa una arquitectura codificador-decodificador,
        en la que el codificador procesa la entrada de forma iterativa, y el decodificador hace lo mismo con la salida del 
        codificador.
    \end{itemize}

Estos modelos serán los utilizados para la comparación en el desarrollo del proyecto. Para ello, se utilizan 
las siguientes métricas:
\begin{itemize}
    \item \textbf{MAE}. Siglas de Mean Absolute Error, o Error Absoluto Medio en español. Mide el error medio
        de una predicción sin tener en cuenta la dirección de dicho error.
    \item \textbf{MASE}. El MASE \cite{ibm:docs/metrics} (Mean Absolte Scaled Error), o error absoluto escalado medio, mide como de bueno es 
        el modelo comparado con un modelo ``ingenuo'' (modelo que predice un valor como su valor previo). Un valor 
        por encima de 1 significa que nuestro modelo es peor que dicho modelo ingenuo.
    \item \textbf{DTW}. Siglas de Dynamic Time Warping, es utilizado para medir la similitud entre dos series temporales. Por ejemplo, una predicción 
        con forma de ecuación lineal puede tener el mismo MAE que otra predicción más irregular, pero esta segunda 
        puede parecerse más a los datos reales.
\end{itemize}